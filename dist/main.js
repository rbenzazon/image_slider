!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){WPViewer=function(){function t(){if(arguments.callee._singletonInstance)return arguments.callee._singletonInstance;arguments.callee._singletonInstance=this,this.contentManager,this.templateManager;var t,e,n,r,s,l,u="publication/contents/pubinfo.xml";function c(){!function(t){for(var e in t.globalVars)t.globalVars[e]=a.resolveVars(t.globalVars[e],t.globalVars,"$")}(this),this.templateManager=new i,this.contentManager=new o,this.contentManager.init(r,this.globalVars),this.templateManager.init(s,p)}function h(){r&&s&&c()}function g(i){var r;m((t=(new window.DOMParser).parseFromString(i,"text/xml").firstChild).querySelector("variables"),this),r=u.substring(0,u.lastIndexOf("/")+1),rootVarValue=globalVars.root,".."==rootVarValue&&(r=r.substring(0,r.substring(0,r.length-2).lastIndexOf("/")+1)),globalVars.root=r,e=t.querySelector("contents").getAttribute("url"),a.load(this.resolveGlobalVars(e),d,this),n=t.querySelector("template").getAttribute("url"),a.load(this.resolveGlobalVars(n),f,this)}function d(t){m((r=(new window.DOMParser).parseFromString(t,"text/xml").firstChild).querySelector("variables"),this),h()}function f(t){m((s=(new window.DOMParser).parseFromString(t,"text/xml").firstChild).querySelector("variables"),this),h()}function p(){this.ready=!0,l()}function m(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];1==i.nodeType&&(e.globalVars[i.nodeName]=a.resolveVars(i.getAttribute("value"),e.globalVars,"$"))}}return this.globalVars={},this.ready=!1,this.init=function(t){a.load(u,g,this),l=t},this.resolveGlobalVars=function(t){return a.resolveVars(t,this.globalVars,"$")},this}function e(e){var n,i,r,o=e,s=this,l=2,u=2,c=3,h=3,g=[],d=[];this.labelFunction="onPageLoaded";var f=t().contentManager.getProperty(o,"extensions"),p=t().contentManager.pagesNum,m=[],v=m;function b(t){A()||x()}function A(){n=[],i=[];for(var t=wpApp.activeViewer.currentPage,e=t-l>0?t-l:0,r=t+u<=p-1?t+u:p-1,o=t-c>0?t-c:0,a=t+h<=p-1?t+h:p-1,s=0;s<=p;++s)s>=e&&s<=r&&null==m[s]&&n.push(s),null!=m[s]&&(s<o||s>a)&&i.push(s);return!(n.length>0||i.length>0)}function w(t,e,n,i,r){null==r&&(r=s),a.load(t,(function(t){e.apply(r,[t,i])}),this)}function x(){for(var e=0;e<n.length;++e){var i=n[e];if(null==g[i]){g[i]=!0;var r=t().contentManager.getFilePath(o,i);"jpg"==f?s.createImageLoader(r,y,P,i,this):"xml"==f&&w(r,y,0,i,this)}}S()}function y(t,e){m[e]=t,g[e]=null,function(t){if(null!=v[t]&&null!=d[t])for(var e=d[t];e.length>0;){var n=e[0];n[s.labelFunction](v[t],t),V(n,t)}}(e)}function P(t,e){if(g[e]=null,null!=d[e])for(var n=d[e];n.length>0;){var i=n[0];i.onItemMissing(v[e],e),V(i,e)}}function S(){for(var t=0;t<i.length;++t){var e=i[t];m[e]=null}}function V(t,e){var n=d[e];index=n.indexOf(t),-1!=index&&n.splice(index,1)}this.onPageChange=function(){clearTimeout(r),r=setTimeout(b,60,this)},this.getPage=function(t,e){return t<0||t>p?null:null==m[t]?(A(),-1==n.indexOf(t)&&n.push(t),x(),m[t]?m[t]:(function(t,e){(function(t){var e;for(var n in d){var i=d[n];-1!=(e=i.indexOf(t))&&i.splice(e,1)}})(t),null==d[e]&&(d[e]=[]),-1==d[e].indexOf(t)&&d[e].push(t)}(e,t),null)):m[t]},this.createImageLoader=function(t,e,n,i,r){var o=new Image;null==r&&(r=s),o.onload=function(){e.apply(r,[this,i])},o.onerror=function(){n.apply(r,[this,i])},o.src=t},this.invalidate=function(t){m[t]=null,g[t]=null},this.clean=function(){var e=t().contentManager.pagesNum;i=[];for(var n=0;n<=e;++n)i.push(n);S()},this.destroy=function(){clearTimeout(r),g&&(g.length=0),n&&(n.length=0),i&&(i.length=0),m&&(m.length=0),d.length=0,d=null,v=null}}function n(){n.prototype.id="simpleViewer",n.prototype.currentPage=0;var i,r,o,s,l,u,c,h,g,d,f,p,m,v,b,A,w,x,y,P,S,V,L=this,N="",M=0,F=0,C=10,O=10,E=10,q=10,I=!1,D=t().contentManager.pagesNum,T=[],_=parseFloat(t().contentManager.getProperty("swf","width")),j=parseFloat(t().contentManager.getProperty("swf","height")),G=85,R=.13,H=document.createElement("img");function k(){console.log("getDefaultPage");var t=H.cloneNode();return t.width=_,t.height=j,t.setAttribute("data-default","true"),t}function X(){if(null!=d||null!=x){x=null!=d?d.width:x,y=null!=d?d.height:y;var t=a.getRestrictRect({x:0,y:0,width:x,height:y},{x:E,y:q,width:f-E-C,height:p-q-O});t.marginXNext=f-t.x,t.scale=t.width/_,P=t}}function W(){!function(){for(var t=0;t<T.length;t++){var e=T[t];o.removeChild(e.element),e.animClass.destroy()}T.length=0}();var t=V.getPage(L.currentPage,L);null!=t&&L.onLinkLoaded(t,L.currentPage)}function B(){o.setAttribute("style",N+"transform: translate("+(P.x+M)+"px, "+(P.y+F)+"px) scale3d("+P.scale+","+P.scale+","+P.scale+")")}function $(t,e,n){anim=(new window.DOMParser).parseFromString(t,"text/html"),style=anim.body.querySelector("style"),bodyChildren=anim.querySelectorAll("body > div"),script=anim.querySelector("script");var i=document.createElement("div");i.setAttribute("id","wpanim"),(i=o.appendChild(i)).setAttribute("style","position: absolute;transform: translate("+n.x+"px, "+n.y+"px)"),n.element=i,T.push(n),i.appendChild(style);for(var r=0;r<bodyChildren.length;r++){var a=bodyChildren[r],s=a.querySelector("img"),l=s.getAttribute("src").replace("assets/",n.contentFile+"assets/");s.setAttribute("src",l),i.appendChild(a)}l=script.getAttribute("src").replace("assets/",n.contentFile+"assets/");var u=document.createElement("script");u.type="text/javascript",u.src=l,(u=i.appendChild(u)).onload=function(t){!function(t,e,n){n.animClass=WPAnimsClasses[wpApp.getDomPath(e).join("")]}(0,u,n)}}function z(){if(null!=d){var t=P.width/d.width,e=h?N:"transition:none;";if(v&&I){var n=P.x+M;d.setAttribute("style",e+"transform:translate("+n+"px,"+P.y+"px) scale("+t+","+t+")"),h=!0,t=P.width/v.width,n=1==m?P.marginXNext+P.x+M:P.x+M-P.marginXNext,e=c?N:"transition:none;",v.setAttribute("style",e+"transform:translate("+n+"px,"+P.y+"px) scale("+t+","+t+")"),c=!0}else d.setAttribute("style",e+"transform:translate("+P.x+"px,"+P.y+"px) scale("+t+","+t+")"),h=!0,r&&ot()}}function Y(){console.log("removeNextImg"),v&&v.parentElement&&v.parentElement.removeChild(v)}function Z(){console.log("removeImg"),d&&d.parentElement&&d.parentElement.removeChild(d)}function Q(){null!=d&&d.parentElement!=i&&(console.log("addImg"),d.setAttribute("class","absolute notInteractive"),d=i.insertBefore(d,o)),document.querySelectorAll("img").length>1&&console.log("problem"),null!=v&&v.parentElement!=i&&(console.log("addNextImg"),(v=i.insertBefore(v,o)).setAttribute("class","absolute notInteractive")),document.querySelectorAll("img").length>2&&console.log("problem"),z()}function J(){var t=L.currentPage;return++t>=D-1&&(t=D-1),t}function K(){var t=L.currentPage;return--t<0&&(t=0),t}function U(t){t.touches&&(t=t.touches[0]),I||(s=t.clientX,t.clientY,M=0,F=0,i.addEventListener("touchmove",et),i.onmousemove=function(t){et(t)},i.addEventListener("touchend",tt),i.onmouseup=function(t){tt()},u=!0,window.requestAnimationFrame(nt))}function tt(t){i.onmousemove=null,i.removeEventListener("touchmove",et),i.onmouseup=null,i.removeEventListener("touchend",tt),u=!1,N="transition:none;",I&&(g=null,b=(-f+P.x)*m,startXOffset=M,M=b,N="transition: transform 0.25s ease-in;",l=!1,null!=d?(h=!0,d.addEventListener("transitionend",rt,!1),r=!0,z(),B()):ot())}function et(t){t.touches&&(t=t.touches[0]),M=t.clientX-s,l=!0}function nt(t){l&&(null==g||t-g>=G)&&(I||(M<0?it(1):M>0&&it(-1)),N="transition: transform "+R+"s linear;",g=t,B(),z(),l=!1),u&&window.requestAnimationFrame(nt)}function it(t){if(!((e=L.currentPage+t)>=0&&e<D))return M=0,i.onmousemove=null,void z();var e;document.querySelectorAll("img").length>1&&console.log("problem"),console.log("startDrag"),A&&(clearTimeout(A),A=null),h=!1,m=t,I=!0;var n=S.getPage(1==m?J():K(),L);c=!1,null==n&&(n=k()),Y(),v=n,Q()}function rt(t){console.log("onPageTransitionEnd"),d.removeEventListener("transitionend",rt),ot()}function ot(){if(r=!1,Z(),L.currentPage=1==m?J():K(),console.log(v.getAttribute("data-default")),null!=v&&"true"==v.getAttribute("data-default")){var t=S.getPage(L.currentPage,L);t&&(Y(),d=t)}else d=v;document.querySelectorAll("img").length>1&&console.log("problem"),h=!1,v=null,M=0,I=!1,S.onPageChange(),V.onPageChange(),Q(),A=setTimeout(at,500,L),W()}function at(e){var n=t().contentManager.getFilePath("Zoom",e.currentPage);S.createImageLoader(n,st,lt,e.currentPage,e)}function st(t,e){e!=L.currentPage||I||(Z(),d=t,h=!1,console.log("onZoomPageLoaded"),Q())}function lt(t,e){wpApp.trace("onZoomPageError")}H.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAPAAAP8AAP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="),n.prototype.init=function(){i=document.createElement("div"),(i=document.body.appendChild(i)).onselectstart=function(t){return t.preventDefault(),!1},i.onmousedown=function(t){U(t)},i.addEventListener("touchstart",(function(t){U(t)})),i.setAttribute("class","simpleViewer"),(o=document.createElement("div")).setAttribute("class","absolute"),i.appendChild(o),wpApp.viewers.push[this],wpApp.activeViewer=this,S=new e("Low"),(V=new e("links")).labelFunction="onLinkLoaded",f=window.innerWidth,p=window.innerHeight,X();var t=S.getPage(0,L);null==t&&(t=k()),null!=t&&this.onPageLoaded(t,0),window.onresize=function(){L.onResize()}},n.prototype.onResize=function(){f=window.innerWidth,p=window.innerHeight,X(),Q(),B()},n.prototype.onPageLoaded=function(t,e){I||(console.log("onPageLoaded begin"),document.querySelectorAll("img").length>1&&console.log("problem onPageLoaded"),Z(),d=t,h=!1,null==P&&X(),Q(),V.getPage(L.currentPage,L),clearTimeout(A),A=setTimeout(at,500,L),console.log("onPageLoaded end"))},n.prototype.onLinkLoaded=function(e,n){n==this.currentPage&&(w=e,function(){w=(w=(new window.DOMParser).parseFromString(w,"text/xml")).querySelectorAll("lk"),B();for(var e=0;e<w.length;e++){var n=w[e],i=n.querySelector("content"),r={};r.x=parseFloat(i.getAttribute("x")),r.y=parseFloat(i.getAttribute("y")),r.width=parseFloat(i.getAttribute("width")),r.height=parseFloat(i.getAttribute("height")),r.contentFile=i.querySelector("file"),r.contentFile&&(r.contentFile=t().resolveGlobalVars(r.contentFile.getAttribute("url")),a.load(r.contentFile,(function(t){$.apply(L,[t,n,r])}),this))}}())}}function i(){var e,n,i={},o=0,a=["main_lib","interface","css","css_flash","css_html5","description_css","font","shop_lib"],s=["interface","locale","config","locale_cart","tpl","tpl2"];this.init=function(l,u){n=u,e=l.querySelector("assets");for(var c=0;c<e.childNodes.length;c++){var h=e.childNodes[c];if(1==h.nodeType){var g=h.getAttribute("id");if(!(s&&-1==s.indexOf(g)||!s&&a&&-1!=a.indexOf(g))){var d=h.getAttribute("onstart");null!=d&&"true"!=d||(f=h.getAttribute("type"),p=g,m=h.getAttribute("url"),o++,i[p]=new r(f,p,t().resolveGlobalVars(m),t().templateManager.onAssetLoaded))}}}var f,p,m},this.onAssetLoaded=function(t,e){0==--o&&n&&n()},this.getAsset=function(t){return i[t]?i[t].content:(console.log("Asset not declared : "+t),null)}}function r(t,e,n,i){var o=i;this.content,r.prototype.onLoaded=function(t){this.content=t,o(this,this.content)},a.load(n,this.onLoaded,this)}function o(){var e;this.paths={},this.prefixes={},this.suffixes={},this.paddings={},this.extensions={},this.fileNames={},this.width={},this.height={};var n="",i="",r=0;this.pagesNum,this.init=function(t,o){var s,l;e=t.querySelector("contents"),i=e.getAttribute("prefix")?e.getAttribute("prefix"):"",n=e.getAttribute("sufix")?e.getAttribute("suffix"):"",r=e.getAttribute("padding")?parseInt(e.getAttribute("padding")):0,e.getAttribute("shift")&&parseInt(e.getAttribute("shift")),this.pagesNum=e.getAttribute("pages_nr")?parseInt(e.getAttribute("pages_nr")):0;for(var u=0;u<e.childNodes.length;u++)1==(l=e.childNodes[u]).nodeType&&(s=l.getAttribute("id"),this.paths[s]=a.resolveVars(l.getAttribute("path",o,"$")),this.extensions[s]=l.getAttribute("type")?l.getAttribute("type"):"",this.prefixes[s]=l.getAttribute("prefix")?l.getAttribute("prefix"):i,this.suffixes[s]=l.getAttribute("suffix")?l.getAttribute("suffix"):n,this.paddings[s]=l.getAttribute("padding")?parseInt(l.getAttribute("padding")):r,this.fileNames[s]=l.firstChild&&l.firstChild.nodeValue?l.firstChild.nodeValue.trim():"",this.width[s]=parseInt(l.getAttribute("width")),this.height[s]=parseInt(l.getAttribute("height")))},this.getProperty=function(t,e){return this[e][t],this[e][t]},this.getFilePath=function(e,n){var i;if(null==n)return t().resolveGlobalVars(this.paths[e]+this.fileNames[e]+"."+this.extensions[e]);var r=this.paddings[e]-n.toString().length;r&&(r=0);var o={};return o.num=(n+1).toString(),-1!=this.paths[e].indexOf("%num%")?(i=this.paths[e]+this.prefixes[e]+"0000000000000000".substr(0,r)+this.suffixes[e]+"."+this.extensions[e],i=a.resolveVars(i,o,"%")):i=this.paths[e]+this.prefixes[e]+"0000000000000000".substr(0,r)+(n+1).toString()+this.suffixes[e]+"."+this.extensions[e],t().resolveGlobalVars(i)}}function a(){}function s(){this.strings={},this.init=function(){var e=t().templateManager.getAsset("locale");null!=e?this.parse(e):console.log("WLLocale can't init, asset locale not found in the template")},this.parse=function(t){for(var e=(new window.DOMParser).parseFromString(t,"text/xml").querySelectorAll("resources > string"),n=0;n<e.length;n++){var i=e[n];this.strings[i.getAttribute("name")]=i.firstChild.data}},this.getString=function(t){return this.strings[t]},this.resolveStrings=function(t){return a.resolveVars(t,this.strings,"#")}}a.resolveVars=function(t,e,n){for(var i=0;;){var r=t.indexOf(n,i);if(-1==r)break;var o=t.indexOf(n,r+1);if(-1==o)break;var a=t.substring(r+1,o);if(null!=e[a]){var s=e[a];t=t.substr(0,r)+s+t.substr(o+1),i=r}else i=o}return t=t.replace(/^~\//g,"publication/")},a.getTimeStamp=function(){var t=new Date;function e(t){return(t<10?"0":"")+t}return t.getFullYear()+e(t.getMonth()+1)+e(t.getDate())+e(t.getHours())+e(t.getMinutes())+e(t.getSeconds())},a.getRestrictRect=function(t,e){var n={},i=e.height/e.width,r=t.height/t.width;if(isNaN(r))return t;var o,a=t.width,s=t.height;return r<=i?(o=e.width/t.width,a=e.width,s*=o):(o=e.height/t.height,s=e.height,a*=o),n.width=a,n.height=s,n.x=(e.width-n.width)/2+e.x,n.y=(e.height-n.height)/2+e.y,n},a.getTodayDate=function(){var t=[];return new Date,t.push(TextHelpers.paddStr(modifiedDate.getDate(),"0",2)),t.push(TextHelpers.paddStr(modifiedDate.getMonth()+1,"0",2)),t.push(TextHelpers.paddStr(modifiedDate.getFullYear(),"0",4)),t.join("/")},a.load=function(t,e,n){null==t&&wpApp.trace("can't load an undefined url");var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(r){4==i.readyState&&(200==i.status?e.apply(n,[i.responseText]):wpApp.trace("Erreur pendant le chargement de "+t))},i.send(null)},window.wpApp=new function(){function e(){!function(){this.locale=new s,this.locale.init(),this.simpleViewer=new n,this.simpleViewer.init()}()}this.startFile,this.simpleViewer,this.viewers=[],this.activeViewer,this.init=function(){t().init(e)},this.getDomPath=function(t){for(var e=[];null!=t.parentNode;){for(var n=0,i=0,r=0;r<t.parentNode.childNodes.length;r++){var o=t.parentNode.childNodes[r];o.nodeName==t.nodeName&&(o===t&&(i=n),n++)}t.hasAttribute("id")&&""!=t.id?e.unshift(t.nodeName.toLowerCase()+t.id):n>1?e.unshift(t.nodeName.toLowerCase()+i):e.unshift(t.nodeName.toLowerCase()),t=t.parentNode}return e.slice(1)},this.trace=function(t){console.log("WPAPP - "+t)}},wpApp.init()}()}]);